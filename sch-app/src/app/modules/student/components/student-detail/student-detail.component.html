<div class="container">
  <h2 *ngIf="!studentId">Add Student</h2>
  <h2 *ngIf="studentId">Edit Student</h2>

  <form
    *ngIf="!isStudentLoading"
    [formGroup]="studentForm"
    (ngSubmit)="onSubmit()"
  >

    <div class="form-group">
      <label for="firstName">First Name</label>
      <input
        id="firstName"
        formControlName="firstName"
        class="form-control"
      />
      <div
        *ngIf="formControls['firstName'].touched && formControls['firstName'].invalid"
        class="text-danger"
      >
        <small *ngIf="formControls['firstName'].errors?.['required']">First
          Name is required.</small>
        <small
          *ngIf="formControls['firstName'].errors?.['minlength']">First
          Name should be at least 2 characters.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="lastName">Last Name</label>
      <input
        id="lastName"
        formControlName="lastName"
        class="form-control"
      />
      <div
        *ngIf="formControls['lastName'].touched && formControls['lastName'].invalid"
        class="text-danger"
      >
        <small *ngIf="formControls['lastName'].errors?.['minlength']">Last
          Name should be at least 2 characters.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="email">Email</label>
      <input
        id="email"
        formControlName="email"
        class="form-control"
      />
      <div
        *ngIf="formControls['email'].touched && formControls['email'].invalid"
        class="text-danger"
      >
        <small *ngIf="formControls['email'].errors?.['email']">Please enter
          a valid email address.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="ssn">SSN</label>
      <input
        id="ssn"
        formControlName="ssn"
        class="form-control"
      />
      <div
        *ngIf="formControls['ssn'].touched && formControls['ssn'].invalid"
        class="text-danger"
      >
        <small *ngIf="formControls['ssn'].errors?.['required']">SSN
          is required.</small>
        <small *ngIf="formControls['ssn'].errors?.['minlength']">Last
          Name should be at least 2 characters.</small>
      </div>
    </div>


    <div class="form-group">
      <label for="phone">Phone Number</label>
      <input
        id="phone"
        formControlName="phoneNumber"
        class="form-control"
      />
      <div
        *ngIf="formControls['phoneNumber'].touched && formControls['phoneNumber'].invalid"
        class="text-danger"
      >
        <small
          *ngIf="formControls['phoneNumber'].errors?.['pattern']">Phone
          number must
          be 10 digits.</small>
      </div>
    </div>

    <div class="form-group">
      <label for="startdate">Start Date</label>
      <input
        id="startdate"
        type="date"
        formControlName="startDate"
        class="form-control"
      />
    </div>

    <div class="form-group row">
      <label
        class=" control-label col-md-3"
        id="lbl_create_image"
        for="selectedImage"
      >
        Profile Image
        <span class="text-danger">*</span>
      </label>
      <div class="col-md-9 row">
        <div class="mb-3">
          <input
            type="file"
            (change)="onFileChange($event)"
            accept='.jpg, .JPG, .jpeg, .JPEG, .png, .PNG, .jfif, .JFIF'
            id="selectedImage"
            [disabled]="isStudentSaving || isUploadingImage || isDeletingImage"
          />
        </div>

        <figure class="figure">
          <img
            *ngIf="profileImage && isImageChanged"
            src="{{ profileImage }}"
            [width]="100"
            [height]="100"
            class="img-fluid ml-3 thumbnail-img"
            id="img_create_image"
            alt=""
            role="presentation"
          >

          <img
            *ngIf="student?.imageUrl && !isImageChanged"
            [src]="student!.imageUrl"
            [width]="100"
            [height]="100"
            class="img-fluid ml-3 thumbnail-img"
            id="img_create_image"
            alt=""
            role="presentation"
          >


        </figure>
      </div>
    </div>








    <button
      type="submit"
      class="btn btn-primary"
      [disabled]="isStudentSaving || isUploadingImage || isDeletingImage"
    >Save</button>
    <button
      (click)="onBack()"
      [disabled]="isStudentSaving || isUploadingImage || isDeletingImage"
    >Back</button>
  </form>
</div>
